# ğŸ¯ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÚ©â€ŒÙ¾ÙˆØ±Øª: Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±ÙˆÛŒ Ù¾ÙˆØ±Øª 8090

## âœ… Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯!

Ù¾ÙˆØ±Øª 80 Ø§Ø´ØºØ§Ù„ Ø¨ÙˆØ¯ØŒ Ø­Ø§Ù„Ø§ **Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ ÙÙ‚Ø· Ø§Ø² ÛŒÚ© Ù¾ÙˆØ±Øª (8090)** Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù‡Ø³ØªÙ†Ø¯.

---

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¬Ø¯ÛŒØ¯

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Ù¾ÙˆØ±Øª 8090 (ØªÙ†Ù‡Ø§ Ù¾ÙˆØ±Øª Ø¨Ø§Ø²)      â”‚
                    â”‚     http://103.75.196.71:8090      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Nginx Reverse Proxy           â”‚
                    â”‚      (shahrzad_nginx)              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Frontend      â”‚   â”‚    Backend       â”‚
              â”‚    (React)       â”‚   â”‚    (FastAPI)     â”‚
              â”‚  Ù¾ÙˆØ±Øª 80 Ø¯Ø§Ø®Ù„ÛŒ  â”‚   â”‚  Ù¾ÙˆØ±Øª 8000 Ø¯Ø§Ø®Ù„ÛŒâ”‚
              â”‚  ÙÙ‚Ø· Ø§Ø² nginx    â”‚   â”‚  ÙÙ‚Ø· Ø§Ø² nginx    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚    Database        â”‚
                               â”‚   (PostgreSQL)     â”‚
                               â”‚  Ù¾ÙˆØ±Øª 5432 Ø¯Ø§Ø®Ù„ÛŒ  â”‚
                               â”‚  ÙÙ‚Ø· Ø§Ø² backend    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§

| URL | Ø³Ø±ÙˆÛŒØ³ Ù‡Ø¯Ù | ØªÙˆØ¶ÛŒØ­ |
|-----|-----------|-------|
| `http://103.75.196.71:8090/` | Frontend | ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒØŒ UI |
| `http://103.75.196.71:8090/api/*` | Backend | API endpoints |
| `http://103.75.196.71:8090/docs` | Backend | API Documentation |

**Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§:**
```bash
# Frontend (ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ)
http://103.75.196.71:8090/

# Login API
http://103.75.196.71:8090/api/auth/login

# Chat API
http://103.75.196.71:8090/api/chat

# API Docs
http://103.75.196.71:8090/docs
```

---

## ğŸ“¦ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ùˆ Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§

### âœ… Ù¾ÙˆØ±Øª Ø¨Ø§Ø² (External):

| Ø³Ø±ÙˆÛŒØ³ | Ù¾ÙˆØ±Øª Ù‡Ø§Ø³Øª | Ù¾ÙˆØ±Øª Ú©Ø§Ù†ØªÛŒÙ†Ø± | Ø¯Ø³ØªØ±Ø³ÛŒ |
|-------|-----------|---------------|---------|
| **Nginx** | **8090** | 80 | ğŸŒ Ø¹Ù…ÙˆÙ…ÛŒ |

### ğŸ”’ Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ (Internal Only):

| Ø³Ø±ÙˆÛŒØ³ | Ù¾ÙˆØ±Øª Ú©Ø§Ù†ØªÛŒÙ†Ø± | Ø¯Ø³ØªØ±Ø³ÛŒ | Ø§Ù…Ù†ÛŒØª |
|-------|---------------|---------|-------|
| **Frontend** | 80 | ÙÙ‚Ø· Ø§Ø² Nginx | ğŸ”’ Ø§Ù…Ù† |
| **Backend** | 8000 | ÙÙ‚Ø· Ø§Ø² Nginx | ğŸ”’ Ø§Ù…Ù† |
| **Database** | 5432 | ÙÙ‚Ø· Ø§Ø² Backend | ğŸ”’ Ø§Ù…Ù† |

---

## ğŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### Ø¯Ø³ØªÙˆØ± Ø³Ø§Ø¯Ù‡:

```bash
bash start.sh
```

### ÛŒØ§ Ø¯Ø³ØªÛŒ:

```bash
docker-compose up -d --build
```

---

## ğŸ¯ ØªØ³Øª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ

### 1. Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§:

```bash
docker-compose ps
```

**Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø¨Ø§Ø´Ø¯:**
```
NAME                  STATUS
shahrzad_db           Up (healthy)
shahrzad_backend      Up
shahrzad_frontend     Up
shahrzad_nginx        Up
```

### 2. Ú†Ú© Ú©Ø±Ø¯Ù† Ù¾ÙˆØ±Øª 8090:

```bash
netstat -tuln | grep 8090
# ÛŒØ§
ss -tuln | grep 8090
```

**Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø¨Ø§Ø´Ø¯:**
```
tcp   0   0   0.0.0.0:8090   0.0.0.0:*   LISTEN
```

### 3. ØªØ³Øª Frontend Ø§Ø² Ù…Ø±ÙˆØ±Ú¯Ø±:

```
http://103.75.196.71:8090
```

### 4. ØªØ³Øª Backend API:

```bash
# Ø§Ø² Ø³Ø±ÙˆØ±
curl http://103.75.196.71:8090/docs

# Login test
curl -X POST http://103.75.196.71:8090/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"test123"}'
```

### 5. ØªØ³Øª Ú©Ø§Ù…Ù„ Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§:

```bash
# Frontend
curl -I http://103.75.196.71:8090/

# API Docs
curl -I http://103.75.196.71:8090/docs

# Health check (Ø§Ú¯Ø± Ø¯Ø§Ø±ÛŒ)
curl http://103.75.196.71:8090/api/health
```

---

## ğŸ”§ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªØºÛŒÛŒØ± ÛŒØ§ÙØªÙ‡

### 1. `docker-compose.yml`

**ØªØºÛŒÛŒØ±Ø§Øª:**
- âœ… Database: Ù¾ÙˆØ±Øª external Ø­Ø°Ù Ø´Ø¯ (ÙÙ‚Ø· Ø¯Ø§Ø®Ù„ÛŒ)
- âœ… Backend: Ù¾ÙˆØ±Øª external Ø­Ø°Ù Ø´Ø¯ (ÙÙ‚Ø· Ø§Ø² nginx)
- âœ… Frontend: Ù¾ÙˆØ±Øª external Ø­Ø°Ù Ø´Ø¯ (ÙÙ‚Ø· Ø§Ø² nginx)
- âœ… Nginx: Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ Ø¨Ø§ Ù¾ÙˆØ±Øª 8090

### 2. `nginx.conf` (Ø¬Ø¯ÛŒØ¯)

**Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ:**
- `/api/*` â†’ Backend (port 8000)
- `/docs` â†’ Backend docs
- `/*` â†’ Frontend (port 80)

### 3. `frontend/src/lib/api.ts`

**ØªØºÛŒÛŒØ±:**
- Ù‚Ø¨Ù„: `http://localhost:8000/api`
- Ø¨Ø¹Ø¯: `/api` (relative path)

---

## ğŸ›¡ï¸ Ù…Ø²Ø§ÛŒØ§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ

### âœ… Ø§Ù…Ù†ÛŒØª Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡:

1. **Database:**
   - âŒ Ù¾ÙˆØ±Øª 5432 Ø¯ÛŒÚ¯Ø± Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª
   - âœ… ÙÙ‚Ø· Backend Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø¢Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯

2. **Backend:**
   - âŒ Ù¾ÙˆØ±Øª 8000 Ø¯ÛŒÚ¯Ø± Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª
   - âœ… ÙÙ‚Ø· Nginx Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø¢Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯

3. **Frontend:**
   - âŒ Ù¾ÙˆØ±Øª 80 Ø¯ÛŒÚ¯Ø± Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª
   - âœ… ÙÙ‚Ø· Nginx Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø¢Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯

4. **Nginx:**
   - âœ… ØªÙ†Ù‡Ø§ Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ÛŒ
   - âœ… Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ rate limitingØŒ authentication Ùˆ... Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†Ø¯
   - âœ… SSL/TLS termination (Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡)

---

## ğŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§:

```bash
# Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
docker-compose logs -f

# ÙÙ‚Ø· Nginx
docker-compose logs -f nginx

# ÙÙ‚Ø· Backend
docker-compose logs -f backend

# ÙÙ‚Ø· Frontend
docker-compose logs -f frontend

# ÙÙ‚Ø· Database
docker-compose logs -f database
```

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ù†Ø§Ø¨Ø¹ Ù…ØµØ±ÙÛŒ:

```bash
docker stats
```

---

## ğŸ”§ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„: Nginx Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Backend/Frontend Ù…ØªØµÙ„ Ø´ÙˆØ¯

```bash
# Ú†Ú© Ú©Ø±Ø¯Ù† network
docker network inspect shahrzad_network

# Ú†Ú© Ú©Ø±Ø¯Ù† Ú©Ù‡ Ù‡Ù…Ù‡ Ø¯Ø± ÛŒÚ© network Ù‡Ø³ØªÙ†Ø¯
docker-compose ps

# Restart Ú©Ø±Ø¯Ù† Nginx
docker-compose restart nginx
```

### Ù…Ø´Ú©Ù„: 502 Bad Gateway

```bash
# Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Backend Ùˆ Frontend
docker-compose ps

# Ú†Ú© Ú©Ø±Ø¯Ù† logs
docker-compose logs nginx
docker-compose logs backend
docker-compose logs frontend

# Restart Ù‡Ù…Ù‡
docker-compose restart
```

### Ù…Ø´Ú©Ù„: Ù¾ÙˆØ±Øª 8090 Ù‡Ù†ÙˆØ² Ø§Ø´ØºØ§Ù„ Ø§Ø³Øª

```bash
# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† process
sudo lsof -i :8090
# ÛŒØ§
sudo netstat -tulpn | grep 8090

# Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù†
sudo kill -9 PID

# ÛŒØ§ Ø§Ú¯Ø± Docker Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ø³Øª
docker ps -a | grep 8090
docker stop CONTAINER_ID
docker rm CONTAINER_ID
```

---

## ğŸ”„ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ

### ÙˆÙ‚ØªÛŒ ØªØºÛŒÛŒØ±ÛŒ Ø¯Ø± Ú©Ø¯ Ø¯Ø§Ø¯ÛŒ:

```bash
# ØªÙˆÙ‚Ù
docker-compose down

# Build Ùˆ Start Ù…Ø¬Ø¯Ø¯
docker-compose up -d --build

# ÛŒØ§ ÙÙ‚Ø· ÛŒÚ© Ø³Ø±ÙˆÛŒØ³ Ø®Ø§Øµ
docker-compose up -d --build frontend
```

---

## ğŸ‰ Ø®Ù„Ø§ØµÙ‡

### âœ… Ú†ÛŒ Ø¯Ø±Ø³Øª Ø´Ø¯:

- [x] ÙÙ‚Ø· **ÛŒÚ© Ù¾ÙˆØ±Øª (8090)** Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ø¨Ø§Ø² Ø§Ø³Øª
- [x] Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ **Nginx Reverse Proxy** Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ
- [x] Ø§Ù…Ù†ÛŒØª Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØª (Database Ùˆ Backend Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³ØªÙ†Ø¯)
- [x] Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ ÙˆØ§Ø¶Ø­: `/` â†’ Frontend, `/api/*` â†’ Backend
- [x] ÛŒÚ© Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ÛŒ: `http://103.75.196.71:8090`

### ğŸ¯ Ø¯Ø³ØªØ±Ø³ÛŒ:

```
ğŸŒ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø§Ø² ÛŒÚ© Ø¢Ø¯Ø±Ø³: http://103.75.196.71:8090
```

---

## ğŸ“ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **ÙÙ‚Ø· ÛŒÚ© Ù¾ÙˆØ±Øª:** ØªÙ†Ù‡Ø§ Ù¾ÙˆØ±Øª 8090 Ø¨Ø§Ø² Ø§Ø³Øª
2. **Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±:** Nginx Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ route Ù…ÛŒâ€ŒÚ©Ù†Ø¯
3. **Ø§Ù…Ù†ÛŒØª:** Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³ØªÙ†Ø¯
4. **Ø±Ø§Ø­ØªÛŒ:** Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø¢Ø¯Ø±Ø³ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯

---

## ğŸš€ Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹

```bash
cd ~/shahrzad-chatbot
bash start.sh
```

**Ø¨Ø¹Ø¯ Ø§Ø² 30-60 Ø«Ø§Ù†ÛŒÙ‡:**

```
ğŸŒ http://103.75.196.71:8090
```

**Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒØ¯!** ğŸ‰
